# PositiveBucks

## Управление пользователями
Каждый пользователь описывается:
- именем
- email, email-ы пользователей не могут повторяться
- некоторым уникальным id

### Доступны API:
- создание пользователя
- получение пользователя по идентификатору
- получение списка пользователей

## Приготовление кофе
### Метод API - сделать заказ на приготовление кофе
Метод принимает на вход:
- id пользователя (опционально)
- тип кофе - американо или капуччино

Этот метод не делает кофе сам сразу, а ставит его в очередь заказов и возвращает пользователю номер заказа в очереди. Номер заказа - целочисленое число. 
Если задан id пользователя, то перед тем, как поставить заказ в очередь, надо проверить, что пользователь с указанным идентификатором действительно существует.

### Обработка очереди
Необходимо реализовать фоновую обработку очереди и приготовления кофе. В один момент можно приготовить 2 чашки кофе. Время приготовления американо - 10 сек. Время приготовления капучино - 20 сек.

## Табло заказов
Табло - это метод GET, возвращающий коллекцию текущих активных заказов. Метод возвращает все заказы:
- ждущие очередь на приготовление
- которые готовятся
- выполенные за последнюю минуту заказы

По каждому заказу возвращается:
- Имя пользователя (если задано)
- номер заказа в очереди (число, выданное как результат вызова API составления заказа)

# Инструкция по запуску и работе с приложением
## Зависимости
- Python 3.6.7
- Тестировался и запускался на MacOS и Ubuntu

## Создание песочницы
```bash
virtualenv --python=python3.6 .env
source .env/bin/activate
```

## Установка зависимостей для работы приложения
```bash
pip3 install -r requirements.txt
```

## Установка зависимостей для запуска тестов, линтеров и тд
```bash
pip3 install -r requirements.test.txt
```

## Переопределение основных настроек (но можно ничего не трогать)
Переопределить можно в settings.py или через переменные окружения операционной системы

## Проверка стиля
```bash
PYTHONPATH=$(pwd) flake8 .
```

## Проверить и пофиксать сортировку импортов isort
```bash
PYTHONPATH=$(pwd) isort -rc .
```

## Запуск тестов (совсем чуток)
```bash
PYTHONPATH=$(pwd) pytest tests
```

## Запуск приложения локально
```bash
python3 manage.py --api
```
После запуска API-приложение доступно по дефолтному адресу http://localhost:8000.

Так же для удобства выполнения запросов и изучения структуры API сделан Swagger UI и доступен он по адресу http://localhost:8000/docs

## Запуск приложения через docker-compose
```bash
docker-compose up --build positivebucks
```
